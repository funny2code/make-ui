<link rel="stylesheet" href="/assets/component-slider.css">
<link rel="stylesheet" href="/assets/component-price-style-1.css">
<link rel="stylesheet" href="/assets/component-badge.css">
<link rel="stylesheet" href="/assets/component-product-card-style-1.css">
<link rel="stylesheet" href="/assets/component-variants.css">
<link rel="stylesheet" href="/assets/template-collection-style-1.css">

<style type="text/css">
  .collection .page-width-br {
    max-width: 100%;
    padding: 0;
  }
  .bc-br-bt .collection__header {
    padding: 20px 0;
    text-align: center;
    border-bottom: 2px solid #000;
  }
  .bc-br-bt .collection__header .title {
    margin: 0;
  }
  .collection.bc-br-bt .grid {
    margin: 0;
  }
  .collection.bc-br-bt .grid__item {
    padding: 0;
    border-left: 1px solid #000;
    border-right: 1px solid #000;
    border-bottom: 2px solid #000;
  }
  .collection.bc-br-bt .grid__item:first-child {
    border-left: 0;
  }
  .collection.bc-br-bt .grid__item:last-child {
    border-right: 0;
  }
  .collection.bc-br-bt .card+.card-information {
    padding-bottom: 20px;
  }
  .collection.bc-br-bt div.center {
    padding: 20px 0;
  }
</style>

<div class="collection bc-<%=settings.section_style%>-bt">
  <div class="page-width page-width-<%=settings.section_style%>">
    <div class="collection__header <% if(section.settings.show_view_all && section.settings.swipe_on_mobile){ %>title-wrapper-with-link<% } %><% if(!section.settings.title){ %> title-wrapper-with-link--no-heading<% } %><% if(collection?.products_count > 2 && section.settings.swipe_on_mobile && section.settings.products_to_show > 2){ %> title-wrapper--self-padded-tablet-down<% } %>">
      <h2 class="title<% if(!section.settings.title){ %> title--no-heading<% } %>"><%= section.settings.title %></h2>

      <% if(section.settings.show_view_all && section.settings.swipe_on_mobile){ %>
        <a href="<%= collection.url %>" class="link underlined-link large-up-hide">view all</a>
      <% } %>
    </div>

    <% var products_to_display = collection?.products_count
      if(collection?.products_count > section.settings.products_to_show){ 
        var products_to_display = section.settings.products_to_show
      }
    %>

    <slider-component class="slider-mobile-gutter">
      <ul class="grid grid--2-col<% if(products_to_display === 4 || !collection){ %> grid--2-col-tablet grid--4-col-desktop<% } else { %> grid--3-col-tablet<% } %><% if(products_to_display > 5){ %> grid--one-third-max grid--4-col-desktop grid--quarter-max<% } %><% if(collection?.products_count > 2 && section.settings.swipe_on_mobile && section.settings.products_to_show > 2){ %> slider slider--tablet grid--peek<% } %><% if(section.settings.show_view_all === false || collection?.products.length < section.settings.products_to_show){ %> negative-margin<% } %><% if(section.settings.show_view_all && collection?.products.length > section.settings.products_to_show){ %> negative-margin--small<% } %>" role="list">
        <% if(collection){ %>
          <% collection?.products.forEach((product, index) => { %>
            <li class="grid__item<% if(collection?.products_count > 2 && section.settings.swipe_on_mobile && section.settings.products_to_show > 2){ %> slider__slide<% } %>">
              <%- include('../snippets/product-card',
                {
                  show_secondary_image: true,
                  add_image_padding: false,
                  product_card_product: product,
                  media_size: section?.settings?.image_ratio,
                  media_gallery:section?.settings?.image_gallery,
                  tag_field:section?.settings?.tag_field,                                   
                  show_vendor: section?.settings?.show_vendor,
                  show_colors: section?.settings?.show_colors,
                  show_view_product: section?.settings?.show_view_product,
                  show_quick_add: section?.settings?.show_quick_add,
                  show_variants_on_hover: section?.settings?.show_variants_on_hover,
                  card_bg_color: section?.settings?.card_bg_color,
                  card_radius: section?.settings?.card_radius,
                  info_align: section?.settings?.info_align
                }) %>
            </li>
          <% }) %>
        <% } else { %>
          <% collection?.products.forEach((product, index) => { %>
            <li class="grid__item<% if(collection?.products_count > 2 && section.settings.swipe_on_mobile && section.settings.products_to_show > 2){ %> slider__slide<% } %>">
              <%- include('../snippets/product-card',
                {
                  show_secondary_image: true,
                  add_image_padding: false,
                  product_card_product: product,
                  media_size: section?.settings?.image_ratio,
                  media_gallery:section?.settings?.image_gallery,
                  tag_field:section?.settings?.tag_field,                                   
                  show_vendor: section?.settings?.show_vendor,
                  show_colors: section?.settings?.show_colors,
                  show_view_product: section?.settings?.show_view_product,
                  show_quick_add: section?.settings?.show_quick_add,
                  show_variants_on_hover: section?.settings?.show_variants_on_hover,
                  card_bg_color: section?.settings?.card_bg_color,
                  card_radius: section?.settings?.card_radius,
                  info_align: section?.settings?.info_align
                })
              %>
            </li>
          <% }) %>
        <% } %>
      </ul>
      <% if(collection?.products_count > 2 && section.settings.swipe_on_mobile && section.settings.products_to_show > 2){ %>
        <div class="slider-buttons no-js-hidden<% if(collection?.products_count < 4){ %> medium-hide<% } %><% if(collection?.products_count < 3){ %> small-hide<% } %>">
          <div class="slider-counter caption">
            <span class="slider-counter--current">1</span>
            <span aria-hidden="true"> / </span>
            <span class="visually-hidden">accessibility oof</span>
            <span class="slider-counter--total"><%= products_to_display %></span>
          </div>
          <button type="button" class="slider-button slider-button--prev" name="previous" aria-label="previous slide"><%- include('../snippets/icon-caret') %></button>
          <button type="button" class="slider-button slider-button--next" name="next" aria-label="next slide"><%- include('../snippets/icon-caret') %></button>
        </div>
      <% } %>
    </slider-component>

    <% if(section.settings.show_view_all && collection?.products_count > section.settings.products_to_show){ %>
      <div class="center<% if(section.settings.swipe_on_mobile){ %> small-hide medium-hide<% } %>">
        <a href="<%= collection.url %>"
          class="button"
          aria-label="view all"
        >
          view all
        </a>
      </div>
    <% } %>
  </div>
</div>