<link rel="stylesheet" href="/assets/component-slider.css">
<link rel="stylesheet" href="/assets/section-main-product-style-1.css">
<link rel="stylesheet" href="/assets/component-accordion-style-1.css">
<link rel="stylesheet" href="/assets/component-badge.css">
<link rel="stylesheet" href="/assets/component-price-style-1.css">
<link rel="stylesheet" href="/assets/component-variants.css">
<link rel="stylesheet" href="/assets/component-deferred-media.css">
<link rel="stylesheet" href="/assets/component-pickup-availability.css">


<% var sizeCharts = product?.metafields?.lengthcharts  %>
<% var colortitle = product?.metafields?.color.color_name.value.toLowerCase() %>
<% var colorvalue = product?.metafields?.color.color_value.value %>
<% var colorimage = product?.metafields?.color.color_image.value  %>


<style>
  :root {
    --prod-colorvalue: <%= colorvalue %>;
  }
  .bc-colors__icon[data-color="<%= colortitle %>"] {
    background-color: var(--prod-colorvalue);
  }
</style>

<% if(colorimage){ %>
<style>
  :root {
    --prod-colorimage: <%= colorimage %>;
  }
  .bc-colors__icon[data-color="<%= colortitle %>"] {
    background-color: transparent;
    background-image: var(--prod-colorimage);
    background-size: cover;
  }
</style>
<% } %>

<% if(section.settings.custom_font_style){ %>
<style>
  :root {
    --prod-title_fontsize: <%=section.settings.title_fontsize%>;
    --prod-title_fontweight: <%=section.settings.title_fontweight%>;
    --prod-title_fontstretch: <%=section.settings.title_fontstretch%>;
    --prod-title_fontstyle: <%=section.settings.title_fontstyle%>;
    --prod-title_lineheight: <%=section.settings.title_lineheight%>;
    --prod-title_letterspacing: <%=section.settings.title_letterspacing%>;

    --prod-title_fontsize_m: <%=section.settings.title_fontsize_m%>;

    --prod-price_fontsize: <%=section.settings.price_fontsize%>;
    --prod-price_fontweight: <%=section.settings.price_fontweight%>;
    --prod-price_fontstretch: <%=section.settings.price_fontstretch%>;
    --prod-price_fontstyle: <%=section.settings.price_fontstyle%>;
    --prod-price_lineheight: <%=section.settings.price_lineheight%>;
    --prod-price_letterspacing: <%=section.settings.price_letterspacing%>;

    --prod-price_fontsize_m: <%=section.settings.price_fontsize_m%>;

    --prod-option_fontsize: <%=section.settings.option_fontsize%>;
    --prod-option_fontweight: <%=section.settings.option_fontweight%>;
    --prod-option_fontstretch: <%=section.settings.option_fontstretch%>;
    --prod-option_fontstyle: <%=section.settings.option_fontstyle%>;
    --prod-option_lineheight: <%=section.settings.option_lineheight%>;
    --prod-option_letterspacing: <%=section.settings.option_letterspacing%>;

    --prod-option_fontsize_m: <%=section.settings.option_fontsize_m%>;

    --prod-info_fontsize: <%=section.settings.info_fontsize%>;
    --prod-info_fontweight: <%=section.settings.info_fontweight%>;
    --prod-info_fontstretch: <%=section.settings.info_fontstretch%>;
    --prod-info_fontstyle: <%=section.settings.info_fontstyle%>;
    --prod-info_lineheight: <%=section.settings.info_lineheight%>;
    --prod-info_letterspacing: <%=section.settings.info_letterspacing%>;

    --prod-info_fontsize_m: <%=section.settings.info_fontsize_m%>;
  }
  .product__info-container .product__title{
    font-size: var(--prod-title_fontsize);
    font-weight: var(--prod-title_fontweight);
    font-stretch: var(--prod-title_fontstretch);
    font-style: var(--prod-title_fontstyle);
    line-height: var(--prod-title_lineheight);
    letter-spacing: var(--prod-title_letterspacing)
  }
  @media(max-width:749px){
    .product__info-container .product__title{
        font-size: var(--prod-title_fontsize_m);
    }
  }
  .product__info-container .bc-product-price-wrapper *{
    font-size: var(--prod-price_fontsize);
    font-weight: var(--prod-price_fontweight);
    font-stretch: var(--prod-price_fontstretch);
    font-style: var(--prod-price_fontstyle);
    line-height: var(--prod-price_lineheight);
    letter-spacing: var(--prod-price_letterspacing)
  }
  @media(max-width:749px){
    .product__info-container .bc-product-price-wrapper *{
        font-size: var(--prod-price_fontsize_m)
    }
  }
  .product__info-container .bc-colors__heading,
  .product__info-container fieldset.product-form__input .form__label{
    font-size: var(--prod-option_fontsize);
    font-weight: var(--prod-option_fontweight);
    font-stretch: var(--prod-option_fontstretch);
    font-style: var(--prod-option_fontstyle);
    line-height: var(--prod-option_lineheight);
    letter-spacing: var(--prod-option_letterspacing)
  }
  @media(max-width:749px){
    .product__info-container .bc-colors__heading,
    .product__info-container fieldset.product-form__input .form__label{
        font-size: var(--prod-option_fontsize_m)
    }
  }
  .product__info-container fieldset label,
  .product__info-container .accordion__content p{
    font-size: var(--prod-info_fontsize);
    font-weight: var(--prod-info_fontweight);
    font-stretch: var(--prod-info_fontstretch);
    font-style: var(--prod-info_fontstyle);
    line-height: var(--prod-info_lineheight);
    letter-spacing: var(--prod-info_letterspacing)
  }
  @media(max-width:749px){
    .product__info-container fieldset label,
    .product__info-container .accordion__content p{
        font-size: var(--prod-info_fontsize_m)
    }
  }
</style>
<% } %>

<link rel="stylesheet" href="/assets/component-deferred-media.css">

<% var models_3d = product?.media?.find(item => item.media_type === "model"); %>
<% var [first_3d_model] = models_3d?.length ? models_3d : [null] %>
<% if(first_3d_model){ %>
  <link rel="stylesheet" href="/assets/component-product-model.css">
  <link id="ModelViewerStyle" rel="stylesheet" href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css">
  <link id="ModelViewerOverride" rel="stylesheet" href="/assets/component-model-viewer-ui.css">
<% } %>

<section class="<% if(section.settings.media_position !== "top"){ %>page-width<% } %> py-<%=section.settings.section_bg_color%>" >
  <div class="product grid grid--1-col <% if(!product?.images?.length){ %>product--no-media<% } %> media-style__<%=section.settings.media_position%> mobile-media-style__<%=section.settings.media_position_m%>">
    <div class="grid__item product__media-wrapper">
      <slider-component class="slider-mobile-gutter">
        <a class="skip-to-content-link button visually-hidden" href="#ProductInfo-<%= product?.id %>">
          skip to product info
        </a>
        <ul class="product__media-list grid grid--peek list-unstyled slider <% if(product?.media?.length > 3){ %>grid--3-col-tablet grid--4-col-desktop<% } else if(product?.media?.length > 2){ %>grid--3-col-tablet <% } else { %> grid--2-col-tablet <% } %> <% if(section.settings.media_position === "top"){ %>slider--desktop<% } else { %>grid-desktop<% } %>  <% if(section.settings.media_position_m === "top"){ %>slider--mobile  <% } else { %>grid-mobile<% } %>" role="list">
          <% if(product?.image){ %>
            <% var media = product?.image %>
            <li class="product__media-item grid__item slider__slide<% if(media.media_type !== 'image'){ %> product__media-item--full<% } %>" data-media-id="<%= product?.id %>-<%= media.id %>">
              <%- include('../snippets/product-thumbnail', {media: media, position: 'featured', loop: section.settings.enable_video_looping, modal_id: product?.id}) %>
            </li>
          <% } %>
          <% product?.images.forEach((media, index) => { %>
            <% if(media?.id !== product?.image?.id){ %>
              <li class="product__media-item grid__item slider__slide<% if(media.media_type !== 'image'){ %> product__media-item--full<% } %>" data-media-id="<%= product?.id %>-<%= media.id %>">
                <%- include('../snippets/product-thumbnail', {media: media, position: index, loop: section.settings.enable_video_looping, modal_id: product?.id}) %>
              </li>
            <% } %>
          <% }) %>
        </ul>
        <div class="slider-buttons slider-buttons--overlay no-js-hidden <% if(product?.media?.length > 3){ %>slider-buttons-desktop<% } %> <% if(product?.media?.length < 2){ %> small-hide<% } %>">
          <button type="button" class="slider-button slider-button--prev" name="previous" aria-label="previous_slide"><%- include('../snippets/icon-caret') %></button>
          <div class="slider-counter caption">
            <span class="slider-counter--current">1</span>
            <span aria-hidden="true"> / </span>
            <span class="visually-hidden">of</span>
            <span class="slider-counter--total"><%= product?.media?.length %></span>
          </div>
          <button type="button" class="slider-button slider-button--next" name="next" aria-label="next_slide"><%- include('../snippets/icon-caret') %></button>
        </div>
      </slider-component>
      <% if(first_3d_model){ %>
        <button
          class="button button--full-width product__xr-button"
          type="button"
          aria-label="xr_button_label"
          data-shopify-xr
          data-shopify-model3d-id="<%= first_3d_model?.id %>"
          data-shopify-title="<%= product?.title %>"
          data-shopify-xr-hidden
        >
          <%- include('../snippets/icon-3d-model') %>
          xr button
        </button>
      <% } %>
    </div>
    <div class="product__info-wrapper <% if(section.settings.media_position === "left"){ %> grid__item <% } else if(section.settings.media_position === "top"){ %>full-width <% } %> py-<%=section.settings.page_width%>">
      <div id="ProductInfo-<%= product?.id %>" class="product__info-container<% if(section.settings.enable_sticky_info){ %> product__info-container--sticky<% } %>">
        <% var product_form_id = 'product-form-' + product?.id %>
        <div class="product-badge" style='width:100%;'><%- include('../snippets/component-badge', {meta: product?.metafields?.selling, vertical: false}) %></div>
        <div class="product_info_left_col">  
        
        <% section.blocks.forEach((block, index) => { %>
          <% if(block.type === '@app'){ %>
          <% } else if(block.type === 'text'){ %>
            <p class="product__text<% if(block.settings?.text_style === 'uppercase'){ %> caption-with-letter-spacing<% } else if(block.settings?.text_style === 'subtitle'){ %> subtitle<% } %>">
              <%- block.settings?.text -%>
            </p>
          <% } else if(block.type === 'title'){ %>
            <h1 class="product__title">
              <%= product?.title %>
            </h1>

            <% if(sizeCharts?.cm_content || sizeCharts?.inches_content){ %>
              <% if(section.blocks?.length === 4){ %>
              <modal-opener class="product-popup-modal__opener no-js-hidden" data-modal="#PopupModal-sizecharts">
                <button id="ProductPopup-sizecharts" class="product-popup-modal__button link bc-size-chart-button" type="button" aria-haspopup="dialog">VIEW SIZING CHART</button>
              </modal-opener>
              <% } %>
            <% } %>

          <% } else if(block.type === 'type'){ %>
            <h5 class="product__type">
              <%= product?.type %>
            </h5>
            
          <% } else if(block.type === 'price'){ %>
            <div class="no-js-hidden bc-product-price-wrapper" id="price-<%= product?.id %>">
              <%- include('../snippets/price', {product: product, use_variant: true, show_badges: false, price_class: 'price--large'}) %>
            </div>        
          <% } else if(block.type === 'quantity_selector'){ %>
            <div class="product-form__input product-form__quantity">
              <label class="form__label" for="Quantity-<%= product?.id %>">
                Quantity
              </label>
              <quantity-input class="quantity">
                <button class="quantity__button no-js-hidden" name="minus" type="button">
                  <span class="visually-hidden">decrease</span>
                  <%- include('../snippets/icon-minus') %>
                </button>
                <input class="quantity__input"
                    type="number"
                    name="quantity"
                    id="Quantity-<%= product?.id %>"
                    min="1"
                    value="1"
                    form="product-form-<%= product?.id %>"
                  >
                <button class="quantity__button no-js-hidden" name="plus" type="button">
                  <span class="visually-hidden">increase</span>
                  <%- include('../snippets/icon-plus') %>
                </button>
              </quantity-input>
            </div>
          <% } else if(block.type === 'variant_picker'){ %>
          <style>
            :root {
              --block-option_bg_color: <%=block.settings?.option_bg_color%>;
              --block-option_color: <%=block.settings?.option_color%>;
              --block-option_br_color: <%=block.settings?.option_br_color%>;
              --block-selected_option_bg_color: <%=block.settings?.selected_option_bg_color%>;
              --block-selected_option_color: <%=block.settings?.selected_option_color%>;
              --block-selected_option_br_color: <%=block.settings?.selected_option_br_color%>;
            }
            .product-form__input input[type='radio'] + label{
              background: var(--block-option_bg_color);
              color: var(--block-option_color);
              border:1px solid;
              border-color: var(--block-option_br_color) !important;
            }
            .product-form__input input[type='radio']:checked + label {
              background: var(--block-selected_option_bg_color);
              color: var(--block-selected_option_color);
              border-color: var(--block-selected_option_br_color) !important;
              cursor: default;
            } 
            .general-picker-sm_radius .product-form__input input[type='radio'] + label{
              border-radius:6px;
            }
            .general-picker-f_radius .product-form__input input[type='radio'] + label{
              border-radius:60px;
            }
            .general-picker-f_radius .product-form__input input[type='radio'] + label[for*=ize]{
              width: 40px;
              height: 40px;
            }
            .color-picker-name .product-form__input input[type='radio'] + label[for*=olor] span{
              display:none;
            }
            .color-picker-color .product-form__input input[type='radio'] + label[for*=olor]{
              font-size: 0px;
              border-radius: 50%;
              padding: 0px;
              min-width: auto;
              border: 1px solid;
            }
            .color-picker-color .product-form__input input[type='radio']:checked + label[for*=olor]{
              border: 2px solid;
            }
            .color-picker-color .product-form__input input[type='radio'] + label[for*=olor] span{
              margin-right: 0px;
              width: 30px;
              height: 30px;
              border: 2px solid transparent;
            }
            .color-picker-color .product-form__input input[type='radio']:checked + label[for*=olor] span{
              border: 2px solid white;
            }
          </style>
            <div class="variant-picker-container color-picker-<%=block.settings?.color_picker_type%> general-picker-<%=block.settings?.general_picker_type%>">
            
        	  <%# include('../snippets/component-colors', {product: product, show_heading: true}) %>            
        
            <% if(product?.variants.length > 1){ %>              
                <variant-radios class="no-js-hidden" data-section="<%= product?.id %>" data-url="<%= product?.url %>">                  
                    <% product?.options?.forEach((option, index)=>{ %>
                        <%
                          var optionName = option?.name.toLowerCase();
                          var color = false;
                          if(optionName === 'color' || optionName === 'colour'){
                            color = true
                          } 
                        %>
                        <fieldset class="js product-form__input" product-option = "<%=optionName%>">
                          <legend class="form__label"><%= option?.name %>: <span class="selected-value"><%=option?.selected_value%></span></legend>
                          <% option?.values.forEach((value, index)=>{ %>
                            <input type="radio" id="<%= product?.id %>-<%= option?.name %>-<%= index %>"
                                  name="<%= option?.name %>"
                                  value="<%= value %>"
                                  form="product-form-<%= product?.id %>"
                                  <% if(option?.selected_value === value){ %>checked<% } %>
                            >
                            
                            <label for="<%= product?.id %>-<%= option?.name %>-<%= index %>">
                              <% if(!color){ %>                                
                                <%= value %>
                              <% } else { %>
                                <span class="pd-colors__icon" data-color="<%= value.toLowerCase() %>" <% if(value){ %>style="background-color:<%= value.toLowerCase() %>"<% } %>></span><%= value %>
                              <% } %>  
                          </label>
                          <% }) %>
                        </fieldset>
                    <% }) %>                  
                  <div id="preorderbunner"></div>
                  <script type="application/json">
                    <%# JSON.parse(product?.variants) %>
                  </script>
                  <script id="product-variants-metafields" type="application/json">
                  [
                    <% product?.variants.forEach((variant, index)=>{ %>
                          {
                          	"<%=variant?.id%>" : 
                            <% if(variant?.metafields?.order?.length > 0){ %>
                              <% variant?.metafields?.order.forEach((item, index)=>{ %>
                                  <% if(index === 0){ %>
                                      {
                                  <% } %>
                                          "<%=item[0]%>" : "<%= item[1] %>"<% if(index !== variant?.metafields?.order.length - 1){ %>,<% } %>
                                  <% if(index === variant?.metafields?.order.length - 1){ %>
                                      }
                                  <% } %>
                              <% }) %>
                            <% } else { %>
                            	""
                            <% } %>
                            <%= index %>
                          }<% if(index !== product?.variants?.length - 1){ %>,<% } %>
                    <% }) %>
                  ]
                  </script>
                </variant-radios>              
            <% } %>
            </div>
        <% if(sizeCharts?.cm_content || sizeCharts?.inches_content){ %>
        <modal-opener class="product-popup-modal__opener no-js-hidden" data-modal="#PopupModal-sizecharts">
          <button id="ProductPopup-sizecharts" class="product-popup-modal__button link bc-size-chart-button" type="button" aria-haspopup="dialog">VIEW SIZING CHART</button>
        </modal-opener>
        <% } %>
          

            <noscript>
              <div class="product-form__input<% if(product?.has_only_default_variant){ %> hidden<% } %>">
                <label class="form__label" for="Variants-<%= product?.id %>">Product Variants</label>
                <div class="select">
                  <select name="id" id="Variants-<%= product?.id %>" class="select__select" form="product-form">
                    <% product?.variants.forEach((variant, index)=>{ %>
                      <option
                        <% if(variant === product?.variants[0]){ %>selected="selected"<% } %>
                        <% if(variant?.available === false){ %>disabled<% } %>
                        value="<%= variant?.id %>"
                      >
                        <%= variant?.title %>
                        <% if(variant?.available === false){ %> - Sold out<% } %>
                        - <%= variant?.price %>
                      </option>
                    <% }) %>
                  </select>
                  <%- include('../snippets/icon-caret') %>
                </div>
              </div>
            </noscript>
          <% } else if(block.type === 'buy_buttons'){ %>
            <product-form class="product-form">
              <form product="<%=product%>" id="product_form_id" class:="form product-form__flex" novalidate="novalidate" data-type="add-to-cart-form">
                <input type="hidden" name="id" value="<%= product?.variants[0]?.id %>">
                <% if(product?.metafields?.gift.product_id){ %>
                <input type="hidden" name="gift_id" value="<%= product?.metafields?.gift.product_id %>">
                <% } %>
                <div id="bc-order-id"></div>
              	<div class="product-form__buttons">
                  <button
                    type="submit"
                    name="add"
                    class="product-form__submit button button--full-width <% if(block.settings?.show_dynamic_checkout && product?.selling_plan_groups){ %>button--primar<% } else { %>button--primary<% } %>"
                    <% if(product?.variants[0]?.available === false){ %>disabled<% } %>
                    <% if(block.settings?.bg_color || block.settings?.color){ %>style="<% if(block.settings?.bg_color){ %>background-color:<%= block.settings?.bg_color %>;box-shadow:0 0 0 .1rem <%= block.settings?.bg_color %>;<% } %><% if(block.settings?.color){ %>color:<%= block.settings?.color %>;<% } %>"<% } %>
                  > 
                    <span class="product-form__submit-label">
                      <% if(product?.variants[0]?.available){ %>
                        <% if(block.settings?.btn){ %>
                          <%= block.settings?.btn %>
                        <% } else { %>
                          Add to cart
                        <% } %>
                      <% } else { %>
                        Sold out
                      <% } %>
                    </span>
                   
                  </button>
                  <% if(block.settings?.show_dynamic_checkout){ %>
                  <% } %>
                </div>
              </form>
            </product-form>

            <link rel="stylesheet" href="/assets/component-pickup-availability.css">

            <% var pick_up_availabilities = product?.variants[0]?.store_availabilities?.find(item=>item.pick_up_enabled === true) %>

            <pickup-availability class="product__pickup-availabilities no-js-hidden"
              <% if(product?.variants[0]?.available && pick_up_availabilities?.length > 0){ %> available<% } %>
              data-base-url="<%= shop.url %>/pickup"
              data-variant-id="<%= product?.variants[0]?.id %>"
              data-has-only-default-variant="<%= product?.has_only_default_variant %>"
            >
              <template>
                <pickup-availability-preview class="pickup-availability-preview">
                  <%- include('../snippets/icon-unavailable') %>
                  <div class="pickup-availability-info">
                    <p class="caption-large">Unavailable</p>
                    <button class="pickup-availability-button link link--text underlined-link">Refresh</button>
                  </div>
                </pickup-availability-preview>
              </template>
            </pickup-availability>

            <script src="/assets/pickup-availability.js" defer="defer"></script>
          <% } %>
        <% }) %>
        </div>
        <div class="product_info_right_col">
        <% section.blocks.forEach((block, index)=>{ %>
          <% if(block.type === 'description'){ %>
            <% if(product?.description){ %>
              <div class="product__description rte">
                <%- product?.description -%>
              </div>
            <% } %>
          <% } else if(block.type === 'collapsible_tab'){ %>
            <% var headingLow = block.settings?.heading?.trim()?.toLowerCase() %>
            <div class="product__accordion accordion <%= headingLow?.replace(/\s/g, '-') %>" <% if(block.settings?.bg_color){ %>style="background-color:<%= block.settings?.bg_color %>;"<% } %>>
              <details>
                <summary <% if(block.settings?.color){ %>style="color:<%= block.settings?.color %>;"<% } %>>
                  <div class="summary__title">
                    <%- include('../snippets/icon-accordion', {icon: block.settings?.icon}) %>
                    <h2 class="h4 accordion__title">
                      <%= block.settings?.heading || block.settings?.page?.title %>
                    </h2>
                  </div>
                  <%- include('../snippets/icon-caret') %>
                </summary>
                <div class="accordion__content" <% if(block.settings?.color){ %>style="color:<%= block.settings?.color %>;"<% } %>>
                  <% if(headingLow === 'details' && product?.description){ %>
                    <%= product?.description %>
                  <% } else { %>
                    <%= block.settings?.content %>
                    <%= block.settings?.page?.content %>
                  <% } %>
                </div>
              </details>
            </div>
          <% } else if(block.type === 'popup'){ %>
              <modal-opener class="product-popup-modal__opener no-js-hidden" data-modal="#PopupModal-<%= product.id %>">
                <button id="ProductPopup-<%= product.id %>" class="product-popup-modal__button link" type="button" aria-haspopup="dialog"><%= block.settings?.link_label || block.settings?.page?.title %></button>
              </modal-opener>
              <a href="<%= block.settings?.page?.url %>" class="product-popup-modal__button link no-js"><%= block.settings?.link_label %></a>
          <% } else if(block.type === 'share'){ %>
            <share-button class="share-button">
              <button class="share-button__button button button--tertiary hidden">
                <%- include('../snippets/icon-share') %>
                Share
              </button>
              <details>
                <summary class="share-button__button button button--tertiary">
                  <%- include('../snippets/icon-share') %>
                  share
                </summary>
                <div class="share-button__fallback">
                  <div class="field">
                    <input type="text"
                          class="field__input"
                          id="url"
                          value="<%= shop.url + product?.url %>"
                          placeholder="share url"
                          onclick="this.select();"
                          readonly
                    >
                    <label class="field__label" for="url">share url</label>
                  </div>
                  <button class="button button--tertiary">
                    <%- include('../snippets/icon-clipboard') %>
                    Copy to Clipboard
                  </button>
                  <span id="ShareMessage-<%= product?.id %>" class="share-button__message hidden" role="status" aria-hidden="true">
                    success message
                  </span>
                </div>
              </details>
            </share-button>
            <!-- <script src="/assets/share.js" defer="defer"></script> -->

          <% } else if(block.type === 'goes'){ %>
            <% if(block.settings?.prod){ %>
              <% var prod = all_products[block.settings?.prod] %>
              <%# include('../snippets/goes', {prod: prod, title: block.settings?.heading}) %>
            <% } else { %>
              <%# include('../snippets/goes', {prod: goesProduct, title: block.settings?.heading}) %>
            <% } %>

          <% } %>
        <% }) %>
      </div>
    </div>
  </div>

  <% var popups = section.blocks?.find(block => block.type === "popup") %>
  <% popups?.length && popups?.forEach((block,index)=>{ %>
    <modal-dialog id="PopupModal-<%= product.id %>" class="product-popup-modal">
      <div role="dialog" aria-label="<%= block.settings?.link_label %>" aria-modal="true" class="product-popup-modal__content" tabindex="-1">
        <button id="ModalClose-<%= product.id %>" type="button" class="product-popup-modal__toggle" aria-label="close"><%- include('../snippets/icon-close') %></button>
        <div class="product-popup-modal__content-info">
          <h1 class="h2"><%= block.settings?.page?.title %></h1>
          <%= block.settings?.page?.content %>
        </div>
      </div>
    </modal-dialog>
  <% }) %>
  
  <% if(sizeCharts?.cm_content || sizeCharts?.inches_content){ %>
  <modal-dialog id="PopupModal-sizecharts" class="product-popup-modal">
    <div role="dialog" aria-modal="true" class="product-popup-modal__content" tabindex="-1">
      <button id="ModalClose-sizecharts" type="button" class="product-popup-modal__toggle" aria-label="close"><%- include('../snippets/icon-close') %></button>
      <size-charts class="product-popup-modal__content-info">
        <% if(sizeCharts?.cm_content && sizeCharts?.inches_content){ %>
        <div class="bc-size-charts-tabs">
          <h2 class="bc-size-charts-tabs-item active" data-index="cm">CM</h2>
          <h2 class="bc-size-charts-tabs-item" data-index="inches">Inches</h2>
        </div>
        <% } %>
        <% if(sizeCharts?.cm_content){ %>
        <div data-id="cm" class="bc-size-charts-content active">
          <% var image = sizeCharts?.cm_content %>
          <div class="media" <% if(image){ %>style="padding-bottom: 100%;"<% } %>>
              <img src="<%= image %>"
                  alt="<%= image.alt %>"
                  width="720"
                  height="720"
              />
          </div>  
        </div>
        <% } %>
        <% if(sizeCharts?.inches_content){ %>
        <% var image = sizeCharts?.inches_content %>
        <div data-id="inches" class="bc-size-charts-content <% if(!sizeCharts?.cm_content){ %>active<% } %>">
          <% var image = sizeCharts?.inches_content %>
          <div class="media" <% if(image){ %>style="padding-bottom: 100%;"<% } %>>
              <img src="<%= image %>"
                  sizes="(min-width: 1100px) 535px, (min-width: 750px) calc((100vw - 130px) / 2), calc((100vw - 50px) / 2)"
                  alt="<%= image.alt %>"
                  width="720"
                  height="720"
              />
          </div>
        </div>
        <% } %>
      </size-charts>
    </div>
  </modal-dialog>
  <% } %>
  <div style="display:none">
    <modal-opener class="product-popup-modal__opener no-js-hidden" data-modal="#PopupModal-shippingcharts">
      <button id="ProductPopup-shippingcharts" class="product-popup-modal__button link bc-shipping-chart-button" type="button" aria-haspopup="dialog"></button>
    </modal-opener>    
  </div>
  <modal-dialog id="PopupModal-shippingcharts" class="product-popup-modal">
    <div role="dialog" aria-modal="true" class="product-popup-modal__content" tabindex="-1">
      <button id="ModalClose-shippingcharts" type="button" class="product-popup-modal__toggle" aria-label="close'"><%- include('../snippets/icon-close') %></button>
      <shipping-chart class="product-popup-modal__content-info">
        <div  class="bc-shipping-charts-content ">
          <div class="on-shippingrates-wrapper"><div class="mt5">
            <div class="grid ga3 pv2 bt bb b--light-gray" style="grid-template-columns: 1fr 1fr 2fr 1fr;">
            <div class="b"><span class="f7">COUNTRY</span></div>
            <div class="b"><span class="f7">COST</span></div>
            <div class="b"><span class="f7">DELIVERY TIME</span></div>
            <div class="b"><span class="f7">SPEND $100+</span></div>
            <div class=""><span class="f7">USA</span></div>
            <div class=""><span class="f7">FREE</span></div>
            <div class=""><span class="f7">4-6 BUSINESS DAYS</span></div>
            <div class=""><span class="f7">FREE</span></div>
            <div class=""><span class="f7">CANADA</span></div>
            <div class=""><span class="f7">FREE</span></div>
            <div class=""><span class="f7">CANADA: 4-6 BUSINESS DAYS ONTARIO: 3-4 BUSINESS DAYS</span></div>
            <div class=""><span class="f7">FREE</span></div>
            <div class=""><span class="f7">UK</span></div>
            <div class=""><span class="f7">$30</span></div>
            <div class=""><span class="f7">2-7 BUSINESS DAYS</span></div>
            <div class=""><span class="f7">FREE</span></div>
            <div class=""><span class="f7">AUSTRALIA</span></div>
            <div class=""><span class="f7">$30</span></div>
            <div class=""><span class="f7">2-7 BUSINESS DAYS</span></div>
            <div class=""><span class="f7">FREE</span></div>
            <div class=""><span class="f7">INTERNATIONAL</span></div>
            <div class=""><span class="f7">$30</span></div>
            <div class=""><span class="f7">2-7 BUSINESS DAYS</span></div>
            <div class=""><span class="f7">FREE</span></div>
            </div>
            <p class="mt4 f6">We ship to the following countries:</p>
            <div class="grid ga3" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
            <div><span class="f7">AUSTRALIA</span></div>
            <div><span class="f7">AUSTRIA</span></div>
            <div><span class="f7">BELGIUM</span></div>
            <div><span class="f7">BRAZIL</span></div>
            <div><span class="f7">CANADA</span></div>
            <div><span class="f7">CROATIA</span></div>
            <div><span class="f7">DENMARK</span></div>
            <div><span class="f7">ESTONIA</span></div>
            <div><span class="f7">FINLAND</span></div>
            <div><span class="f7">FRANCE</span></div>
            <div><span class="f7">GERMANY</span></div>
            <div><span class="f7">GIBRALTAR</span></div>
            <div><span class="f7">GREECE</span></div>
            <div><span class="f7">HONG KONG</span></div>
            <div><span class="f7">HUNGARY</span></div>
            <div><span class="f7">IRELAND</span></div>
            <div><span class="f7">ISRAEL</span></div>
            <div><span class="f7">ITALY</span></div>
            <div><span class="f7">JAPAN</span></div>
            <div><span class="f7">KOREA</span></div>
            <div><span class="f7">LATVIA</span></div>
            <div><span class="f7">LITHUANIA</span></div>
            <div><span class="f7">LUXEMBOURG</span></div>
            <div><span class="f7">MALAYSIA</span></div>
            <div><span class="f7">MALTA</span></div>
            <div><span class="f7">NETHERLANDS</span></div>
            <div><span class="f7">NEW ZEALAND</span></div>
            <div><span class="f7">NORWAY</span></div>
            <div><span class="f7">POLAND</span></div>
            <div><span class="f7">PORTUGAL</span></div>
            <div><span class="f7">RUSSIA</span></div>
            <div><span class="f7">SINGAPORE</span></div>
            <div><span class="f7">SOUTH KOREA</span></div>
            <div><span class="f7">SPAIN</span></div>
            <div><span class="f7">SWEDEN</span></div>
            <div><span class="f7">SWITZERLAND</span></div>
            <div><span class="f7">UNITED KINGDOM</span></div>
            <div><span class="f7">UNITED STATES</span></div>
            </div>
            </div></div>
        </div>
      </shipping-chart>
    </div>
  </modal-dialog>
  <%# include('../snippets/instagram-feed') %>
  <%# include('../snippets/tiktok-feed') %>
  
</section>

<!-- <script>
  class ProductModal extends ModalDialog {
    constructor() {
      super();
    }

    hide() {
      super.hide();
      window.pauseAllMedia();
    }

    show(opener) {
      super.show(opener);
      this.showActiveMedia();
    }

    showActiveMedia() {
      this.querySelectorAll(`[data-media-id]:not([data-media-id="${this.openedBy.getAttribute("data-media-id")}"])`).forEach((element) => {
          element.classList.remove('active');
        }
      )
      const activeMedia = this.querySelector(`[data-media-id="${this.openedBy.getAttribute("data-media-id")}"]`);
      activeMedia.classList.add('active');
      activeMedia.scrollIntoView();

      if (activeMedia.nodeName === 'DEFERRED-MEDIA' && activeMedia.querySelector('template')?.content?.querySelector('.js-youtube'))
        activeMedia.loadContent();
    }
  }

  customElements.define('product-modal', ProductModal);
</script> -->
<script src="/assets/product-form.js" defer="defer"></script>

<% if(first_3d_model){ %>
  <script type="application/json" id="ProductJSON-<%= product?.id %>">
    <%= product?.media?.find(item => item.media_type === 'model') %>
  </script>

  <script src="/assets/product-model.js" defer></script>
<% } %>
<style>
  .on-shippingrates-wrapper .grid{
    grid-template-columns: 1fr 1fr 2fr 1fr;
    display: grid;
    line-height: 3;
    border-bottom: 1px solid gainsboro; 
    border-top: 1px solid gainsboro;
  }
  .on-shippingrates-wrapper .grid>div{
    padding:3px 8px;
  }
  .shipping-and-returns .accordion__content h3{
    cursor: pointer;
  }
</style>
<script>
  
  var shipping_chart = document.querySelectorAll('.shipping-and-returns .accordion__content h3');
  for(i=0;i<shipping_chart.length;i++){    
    if(shipping_chart[i].textContent.toLowerCase().includes('shipping chart')){
      
      shipping_chart[i].addEventListener("click", function() {
        document.getElementById('ProductPopup-shippingcharts').click();
      });
    } else if(shipping_chart[i].textContent.toLowerCase().includes('return policy')){
      shipping_chart[i].addEventListener("click", function() {
        window.location.href = '/pages/shipping';
      });
    }
  }
</script>