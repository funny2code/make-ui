<!DOCTYPE html>
<html>
  <head>
    <title><%= make.title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  </head>
  <body>
    <%# include('make/header', {id: false, show: false}) %>
    <div class="py__next-header">
      <h1 class="py__next-header__title">
        <a href="/">
          <img src="/images/logo.png" alt="<%=make.title%>" width="120"/>
        </a>
      </h1>
      <h2 class="py__next-header__subtitle">Shopify Theme Generator</h2>
      <div class="py__steps-wrap">
        <span data-index="1" class="py__steps-item active">1. Business</span>
        <span class="py__step-icon">></span>
        <span data-index="2" class="py__steps-item">2. Design</span>
        <span class="py__step-icon">></span>
        <span data-index="3" class="py__steps-item">3. Pick a theme</span>
      </div>
      <% if(!user){ %>
        <a href="/login" class="py__button py__button-white py__login-button">
          Log In
        </a>
      <% } else { %>
        <a href="/logout" class="py__button py__button-white py__logout-button">
          Log Out
        </a>
      <% }  %>
    </div>
    <div class="py__step-bussines py__remix-popup active" data-id="1">
      <div class="py__remix-popup__content">
          <h2 class="py__remix-popup__heading">Welcome To Make UI</h2>
          <div class="py__remix-popup__content-wrap">
              <div class="py__filed-wrap">
                  <label>Your Bussines Name</label>
                  <input type="text" class="py__filed" placeholder="Name" name="bussines_name"/>
                  <div class="py__radio-wrap">
                      <h6 class="py__radio-group__heading">Generate New Logo</h6>
                      <ul class="radio-list">
                          <li>
                            <input type="radio" name="use_ai_logo" id="radio_screen_1" value="yes"/>
                            <label for="radio_screen_1">YES</label>
                          </li>
                          <li>
                            <input type="radio" name="use_ai_logo" id="radio_screen_2" value="no" checked/>
                            <label for="radio_screen_2">NO</label>
                          </li>
                      </ul>
                  </div>
              </div>
              <div class="py__filed-wrap">
                  <label>Your Product Type</label>
                  <input type="text" class="py__filed" placeholder="Type" name="type_product"/>
                  <div class="py__radio-wrap">
                      <h6 class="py__radio-group__heading">Generate New Images</h6>
                      <ul class="radio-list">
                          <li>
                            <input type="radio" name="use_ai_image" id="radio_screen_3" value="yes"/>
                            <label for="radio_screen_3">YES</label>
                          </li>
                          <li>
                            <input type="radio" name="use_ai_image" id="radio_screen_4" value="no" checked/>
                            <label for="radio_screen_4">NO</label>
                          </li>
                      </ul>
                  </div>
              </div>
              <div class="py__filed-wrap">
                  <label>Your Theme Colors Description</label>
                  <input type="text" class="py__filed" placeholder="Description" name="color_desc"/>
                  <div class="py__radio-wrap">
                      <h6 class="py__radio-group__heading">Generate New Colors Ai</h6>
                      <ul class="radio-list">
                          <li>
                            <input type="radio" name="use_ai_color" id="radio_screen_5" value="yes"/>
                            <label for="radio_screen_5">YES</label>
                          </li>
                          <li>
                            <input type="radio" name="use_ai_color" id="radio_screen_6" value="no" checked/>
                            <label for="radio_screen_6">NO</label>
                          </li>
                      </ul>
                  </div>
              </div>
              <div class="py__filed-wrap">
                <label>DALLE OR STABLE DIFFUSION API KEY</label>
                <input type="text" class="py__filed" placeholder="API KEY" name="api_key"/>
                <div class="py__radio-wrap py__radio-openai-api">
                  <h6 class="py__radio-group__heading">Image Model</h6>
                  <ul class="radio-list">
                      <li>
                        <input type="radio" name="image_model" id="image_model_dalle" value="dalle" <% if(prompts.image_model === "dalle"){ %>checked<% } %> />
                        <label for="image_model_dalle">DALLE</label>
                      </li>
                      <li>
                        <input type="radio" name="image_model" id="image_model_stable" value="stable diffusion" <% if(prompts.image_model === "stable diffusion"){ %>checked<% } %>/>
                        <label for="image_model_stable">STABLE DIFFUSION</label>
                      </li>
                  </ul>
                </div>
              </div>
              <div class="py__button-wrap">
                  <button class="py__button py__button-blue py__step-next-btn" type="button" data-index="2">Next Step</button>
              </div>
          </div>
      </div>
      <% if(user?.isAdmin){ %>
        <div class="py__remix-prompt-fileds">
          <form action="/prompts" method="post" class="py__remix-prompt-form">
            <% if(prompts?._id){ %>
              <input type="hidden" name="_id" value="<%=prompts._id%>">
            <% } %> 
            <div class="py__remix-prompt-fileds-item">
              <label for="text_prompt">Text Prompt</label>
              <textarea id="text_prompt" name="text_prompt"><%=prompts.text_prompt%></textarea>
            </div>
            <div class="py__remix-prompt-fileds-item">
              <label for="logo_prompt">Logo Prompt</label>
              <textarea id="logo_prompt" name="logo_prompt"><%=prompts.logo_prompt%></textarea>
            </div>
            <div class="py__remix-prompt-fileds-item">
              <label for="image_prompt">Image Prompt</label>
              <textarea id="image_prompt" name="image_prompt"><%=prompts.image_prompt%></textarea>
            </div>
            <div class="py__remix-prompt-fileds-item">
              <label for="color_prompt">Color Prompt</label>
              <textarea id="color_prompt" name="color_prompt"><%=prompts.color_prompt%></textarea>
            </div>
            <div class="py__remix-prompt-btn-wrap">
              <button type="submit" class="py__button py__button-blue py__button-prompt-save">Save</button>
            </div>
          </form>
        </div>
      <% } else { %>
          <input type="hidden" name="text_prompt" value="<%=prompts.text_prompt%>">
          <input type="hidden" name="logo_prompt" value="<%=prompts.logo_prompt%>">
          <input type="hidden" name="image_prompt" value="<%=prompts.image_prompt%>">
          <input type="hidden" name="color_prompt" value="<%=prompts.color_prompt%>">
          <input type="hidden" name="image_model" value="<%=prompts.image_model%>">
      <% } %>
    </div>
    <% if(usersThemes?.length){ %>
      <div class="py__user-themes">
        <div class="py__user-themes-header">
          <h2 class="py__user-themes-title">Welcome <%= user.email %>!</h2>
          <p class="py__user-themes-description">Your themes (<%= usersThemes?.length %>)</p>
          <div class="py__user-themes-wrap">
            <% usersThemes.forEach((theme, index)=>{ %>
              <% if(theme?.settings_schema?.length){ %>
                <%- include('make/usertheme', {id: theme._id, settings: theme.settings_schema[0]}) %>
              <% } %>
            <% }) %>
          </div>
        </div>
      </div>
    <% } %>
    <% if(themes?.length){ %>
      <%# if(make.themes_name || make.themes_desc){ %>
        <!-- <div class="py__themes-heading"> -->
          <%# if(make.themes_name){ %>
            <!-- <h2 class="py__themes-heading-name"><%# make.theme_name %></h2> -->
          <%# } %>
          <%# if(make.themes_desc){ %>
            <!-- <p class="py__themes-heading-description"><%# make.theme_desc %></p> -->
          <%# } %>
        <!-- </div> -->
      <%# } %>
      <div class="py__themes" data-id="2">
        <% themes.forEach(theme => { %>
          <% if(theme?.settings_schema?.length){ %>
            <%- include('make/theme', {
              id: theme._id, 
              settings: theme.settings_schema[0]
            }) %>
          <% } %>
        <% }) %>
      </div>
    <% } %>
    <div class="py__remix-content"></div>
    <% if(remixThemes?.length){ %>
      <% if(make.remix_name || make.remix_desc){ %>
        <div class="py__themes-heading">
          <% if(make.remix_name){ %>
            <h2 class="py__themes-heading-name"><%= make.remix_name %></h2>
          <% } %>
          <% if(make.remix_desc){ %>
            <p class="py__themes-heading-description"><%= make.remix_desc %></p>
          <% } %>
        </div>
      <% } %>
      <div class="py__remix-themes">
        <table>
          <tr>
            <th>#</th>
            <th>ID</th>
            <th>IMAGE</th>
            <th>SETTINGS</th>
          </tr>
          <% remixThemes.forEach((theme,index) => { %>
            <tr>
              <td><%=index+1%></td>
              <td><%=theme._id%></td>
              <td>
                <!-- <img src="/screens/screen-<%=theme._id%>.png">
                <img src="/screens/m-screen-<%=theme._id%>.png"> -->
              </td>
              <td>
                <div class="py_btn-settings-wrapper">
                  <a class="py__btn-edit" href="/remix-editor/<%=theme._id%>?page=index">Edit</a>
                  <a class="py__btn-remove" href="/remix-editor/<%=theme._id%>">Remove</a>
                </div>
              </td>
            </tr>
          <% }) %>
        </table>
      </div>
    <% } %>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="/javascripts/make.js"></script>
    <div class="py__loading-wrap">
      <div class="py__loading">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
      </div>
    </div>
    <div class="py__loading-small">
      <span class="count">0</span>
      <div class="message">Loading</div>
      <div class="icon">
          <svg version="1.1" id="L9" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">
              <path fill="#fff" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
                <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"></animateTransform>
            </path>
          </svg>
      </div>
    </div>
  </body>
</html>
