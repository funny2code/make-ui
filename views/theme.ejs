<!DOCTYPE html>
<html>
    <head>
        <title><%= make.title %></title>
        <link rel='stylesheet' href='/stylesheets/style.css' />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    </head>
    <body>
        <%- include('make/header', {id: id, themeName: settings ? settings[0]?.theme_name : null }) %>
        <div class="py__make">
            <div class="py__make-sidebar">
                <% if(settingOptions){ %>
                    <div class="py__settings-select">
                        <div class="py__settings-select-options">
                            <ul class="py__options-ul">
                                <% settingOptions.forEach(option => { %>
                                    <li class="py__options-ul-li">
                                        <a <% if(!option.menu){ %>href="/themes/<%=id%>?page=<%=page%>&<%=option.type%>=<%=option.name%>"<% } %> class="py__settings-select-options-item<% if(active === option.name){ %> active<% } %>" data-id="<%= option.menu %>">
                                            <span><%- include('icons', {type: option.icon}) %></span>
                                            <span class="py__select-option-label"><%= option.title %></span>
                                        </a>
                                        <% if(option.menu){ %>
                                            <ul class="py__sub-options-ul" id="<%= option.menu %>">
                                                <% option.subOptions.forEach(subOption => { %>
                                                    <li>
                                                        <a href="/themes/<%=id%>?page=<%=subOption.page ? subOption.page : page%>&<%= subOption.type ? subOption.type : option.type %>=<%=subOption.href ? subOption.href : subOption.name%>" class="py__sub-options-item<% if(active === subOption.name){ %> active<% } %>">
                                                            <span><%= subOption.name %></span>
                                                            <span><%- include('icons', {type:'arrow_right'}) %></span>
                                                        </a>
                                                    </li>
                                                <% }) %>
                                            </ul>
                                        <% } %>
                                    </li>
                                <% }) %>
                            </ul>
                        </div>
                    </div>
                <% } %>
            </div>
            <div class="py__make-preview">
                <div class="py__preview-content">
                    <div class="py__preview-settings">
                        <div class="py__preview-select">
                            <select class="py__preview-pages-select">
                                <option value="home-page" data-href="/themes/<%=id%>?page=Home%20Page&global=Global%20Styles" <% if(page === 'Home Page'){ %>selected<% } %>>Home Page Preview</option>
                                <option value="product-page" data-href="/themes/<%=id%>?page=Product%20Page&global=Global%20Styles" <% if(page === 'Product Page'){ %>selected<% } %>>Product Page Preview</option>
                            </select>
                        </div>
                        <div class="py__preview-buttons">
                            <button type="button" data-type="desktop" data-view="100%" class="py__button py__button-view active">
                                <%- include('icons', {type: 'desktop'}) %>
                                Desktop
                            </button>
                            <button type="button" data-type="tablet" data-view="768px" class="py__button py__button-view">
                                <%- include('icons', {type: 'tablet'}) %>
                                Tablet
                            </button>
                            <button type="button" data-type="mobile" data-view="425px" class="py__button py__button-view">
                                <%- include('icons', {type: 'tablet'}) %>
                                Mobile
                            </button>
                        </div>
                    </div>
                    <div class="py__preview-iframe">
                        <div class="py__loading-wrap">
                            <div class="py__loading"><div></div><div></div><div></div></div>
                        </div>
                        <iframe src="/view/<%= id %>?page=<%=page%><% if(activeType === 'section'){%>&section=<%=active%><% } else { %>&global=<%=active%><% } %>" class="py__view-iframe"></iframe>
                    </div>
                </div>
            </div>
            <div class="py__make-settings">
                <form class="py__settings-form" method="post" action="/save/<%= id %>?<% if(activeType === 'section'){%>section=<%=active%><% } else { %>global=<%=active%><% } %>" aria-multiline="true">
                    <% if(settings){ %>
                        <div class="py__settings-content">
                            <div class="py__loading-wrap">
                                <div class="py__loading"><div></div><div></div><div></div></div>
                            </div>
                            <% settings.forEach(comp => { %>
                                <h2 class="py__settings-heading"><%= comp.name %></h2>
                                <% if(comp.settings){ %>
                                    <%- include('make/settings', {settings: comp.settings, global: true}) %>
                                <% } else { %>
                                    <%- include('components/brand', {name: comp.theme_name}) %>
                                <% } %>
                            <% }) %>
                        </div>
                    <% } %>
                    <% if(section){ %>
                        <div class="py__settings-content">
                            <div class="py__loading-wrap">
                                <div class="py__loading"><div></div><div></div><div></div></div>
                            </div>
                            <h2 class="py__settings-heading"><%= section.name %></h2>
                            <% if(section.settings){ %>
                                <%- include('make/settings', {settings: section.settings, global: false}) %>
                            <% } %>
                            <% if(section.blocks){ %>
                                <h2 class="py__settings-heading">Blocks</h2>
                                <%- include('make/blocks', {blocks: section.blocks}) %>
                            <% } %>
                        </div>
                    <% } %>
                </form>
            </div>
            <div class="py__full-loading-wrapper">
                <div class="py__full-loading"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
            </div>
        </div>
        <script src="/javascripts/make.js"></script>
    </body>
</html>
